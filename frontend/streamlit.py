import streamlit as st
from typing import Generator
from groq import Groq
import os
from dotenv import load_dotenv
import requests
import streamlit as st
import requests
from dotenv import load_dotenv

load_dotenv()

st.set_page_config(page_icon="ðŸ’¬", layout="wide",
                   page_title="groq chatbot")

def icon(emoji: str):
    """Shows an emoji as a Notion-style page icon."""
    st.write(
        f'<span style="font-size: 78px; line-height: 1">{emoji}</span>',
        unsafe_allow_html=True,
    )


icon("ðŸ˜˜")

st.subheader("Groq Chat Streamlit App", divider="rainbow", anchor=False)

# Input field for user to enter their name
prompt = st.text_input("Enter your prompt:")

# Button to submit the form
if st.button("Submit"):
    if prompt:
        # Send a POST request to the backend
        response = requests.post(os.environ.get("BACKEND_URL"), json={"query1": prompt})

        # Parse the response from the backend
        if response.status_code == 200:
            with st.chat_message("assistant", avatar="ðŸ¤–"):
                st.write(response.text)
        else:
            st.error("Error communicating with backend.")
    else:
        st.warning("Please enter a prompt.")